#Область ПрограммныйИнтерфейс

// Возвращает вид характеристики и его картинку
//
// Параметры:
//   Характеристика - ПланВидовХарактеристикСсылка.ХарактеристикиПерсонала - характеристика персонала, вид которой нужно
//                                                                           получить.
//
// ВозвращаемоеЗначение:
//   Структура - структура с видом переданной характеристики персонала и его картинкой.
//
Функция ВидХарактеристики(Характеристика) Экспорт
	Возврат ХарактеристикиПерсонала.ВидИКартинкаХарактеристики(Характеристика);
КонецФункции

#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс

Функция ТаблицаУдаляемыхХарактеристикИЗначенийПоУдаляемымДействиям(УдаляемыеДействия, СтруктураМассивовДанныхФормы) Экспорт 

	СтруктураТаблицФормы = ПреобразоватьСтруктурыТаблицФормВТаблицыЗначений(СтруктураМассивовДанныхФормы);
	
	Возврат ХарактеристикиПерсонала.ТаблицаУдаляемыхХарактеристикИЗначенийПоУдаляемымДействиям(
		УдаляемыеДействия,
		СтруктураТаблицФормы.ДействияСотрудников,
		СтруктураТаблицФормы.Характеристики,
		СтруктураТаблицФормы.ЗначенияХарактеристики);

КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Функция ПреобразоватьСтруктурыТаблицФормВТаблицыЗначений(СтруктураМассивовДанныхФормы)

	ВозвращаемаяСтруктура = Новый Структура;
	
	// Действия
	ТаблицаДействий = Новый ТаблицаЗначений;
	ТаблицаДействий.Колонки.Добавить("ДействиеСотрудника", Новый ОписаниеТипов("СправочникСсылка.ДействияСотрудников"));
	Для каждого СтрокаДействий Из СтруктураМассивовДанныхФормы.ДействияСотрудников Цикл
		ЗаполнитьЗначенияСвойств(ТаблицаДействий.Добавить(), СтрокаДействий);
	КонецЦикла; 
	ВозвращаемаяСтруктура.Вставить("ДействияСотрудников", ТаблицаДействий);
	
	// Характеристики
	ТаблицаХарактеристик = Новый ТаблицаЗначений;
	ТаблицаХарактеристик.Колонки.Добавить("Характеристика", Новый ОписаниеТипов("ПланВидовХарактеристикСсылка.ХарактеристикиПерсонала"));
	Для каждого СтрокаХарактеристик Из СтруктураМассивовДанныхФормы.Характеристики Цикл
		ЗаполнитьЗначенияСвойств(ТаблицаХарактеристик.Добавить(), СтрокаХарактеристик);
	КонецЦикла; 
	ВозвращаемаяСтруктура.Вставить("Характеристики", ТаблицаХарактеристик);
	
	// Значения
	ТаблицаЗначенийХарактеристик = Новый ТаблицаЗначений;
	ТаблицаЗначенийХарактеристик.Колонки.Добавить("Характеристика", Новый ОписаниеТипов("ПланВидовХарактеристикСсылка.ХарактеристикиПерсонала"));
	ТаблицаЗначенийХарактеристик.Колонки.Добавить("Значение", Новый ОписаниеТипов("СправочникСсылка.ЗначенияХарактеристикПерсонала"));
	Для каждого СтрокаЗначенийХарактеристик Из СтруктураМассивовДанныхФормы.ЗначенияХарактеристики Цикл
		ЗаполнитьЗначенияСвойств(ТаблицаЗначенийХарактеристик.Добавить(), СтрокаЗначенийХарактеристик);
	КонецЦикла; 
	ВозвращаемаяСтруктура.Вставить("ЗначенияХарактеристики", ТаблицаЗначенийХарактеристик);
	
	Возврат ВозвращаемаяСтруктура;

КонецФункции

#КонецОбласти