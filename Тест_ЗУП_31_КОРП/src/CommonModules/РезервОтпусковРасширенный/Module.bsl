
#Область СлужебныеПроцедурыИФункции

Процедура НастройкиРасчетаРезервовОтпусковПриЗаписи(Источник, Отказ, Замещение) Экспорт
	
	УстановитьПривилегированныйРежим(Истина);

	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	НастройкиРасчетаРезервовОтпусков.ФормироватьРезервОтпусковБУ
	|ИЗ
	|	РегистрСведений.НастройкиРасчетаРезервовОтпусков КАК НастройкиРасчетаРезервовОтпусков
	|ГДЕ
	|	НастройкиРасчетаРезервовОтпусков.ФормироватьРезервОтпусковБУ";
	
	Результат = Запрос.Выполнить();
	
	Константы.ИспользоватьРасчетРезервовОтпусков.Установить(Не Результат.Пустой());
	
КонецПроцедуры

Процедура ДополнитьФормуЭлементаСправочникаОрганизации(Форма, ИмяГруппыДляВставки = "ГруппаНастройкиРасчетаРезервовОтпусков") Экспорт
	
	Если Не ПравоДоступа("Чтение", Метаданные.РегистрыСведений.НастройкиРасчетаРезервовОтпусков) Тогда
		Возврат;
	КонецЕсли;
	
	ИмяКоманды = "НастройкиРасчетаРезервовОтпусков";
	Если Форма.Команды.Найти(ИмяКоманды) = Неопределено Тогда
		КомандаФормы = Форма.Команды.Добавить(ИмяКоманды);
		КомандаФормы.Заголовок = НСтр("ru = 'Оценочные обязательства (резервы) отпусков'");
		КомандаФормы.Действие = "Подключаемый_" + ИмяКоманды;
	КонецЕсли;
	
	ГруппаФормы = Форма.Элементы.Найти(ИмяГруппыДляВставки);
	Если Форма.Элементы.Найти(ИмяКоманды) = Неопределено Тогда
		Элемент = Форма.Элементы.Добавить(ИмяКоманды, Тип("КнопкаФормы"), ГруппаФормы);
		Элемент.Вид = ВидКнопкиФормы.Гиперссылка;
		Элемент.ИмяКоманды = ИмяКоманды;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти