#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)
	
	Запрос = Новый Запрос;
	
	Запрос.УстановитьПараметр("КатегорияСтажа", КатегорияСтажа);
	Запрос.УстановитьПараметр("Ссылка", Ссылка);
	
	Запрос.Текст = "ВЫБРАТЬ
	               |	ВидыСтажа.Ссылка
	               |ИЗ
	               |	Справочник.ВидыСтажа КАК ВидыСтажа
	               |ГДЕ
	               |	ВидыСтажа.КатегорияСтажа = &КатегорияСтажа
	               |	И ВидыСтажа.КатегорияСтажа <> ЗНАЧЕНИЕ(Перечисление.КатегорииСтажа.ПустаяСсылка)
	               |	И ВидыСтажа.КатегорияСтажа <> ЗНАЧЕНИЕ(Перечисление.КатегорииСтажа.Прочее)
	               |	И ВидыСтажа.Ссылка <> &Ссылка";
				   
	РезультатЗапроса = Запрос.Выполнить();
	
	Если Не РезультатЗапроса.Пустой() Тогда 
		ТекстСообщения = НСтр("ru = 'Вид стажа данной категории уже существует.'");
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю(ТекстСообщения, Ссылка, "КатегорияСтажа", , Отказ);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли	

