
#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПриЗаписи(Отказ, Замещение)
	
	Если ЗарплатаКадры.ОтключитьБизнесЛогикуПриЗаписи(ЭтотОбъект) Тогда
		Возврат;
	КонецЕсли;
	
	Если ЭтотОбъект.Количество() = 0 Тогда
		Возврат;
	КонецЕсли;
	
	НачислятьПлановыеПрочиеДоходы = ПолучитьФункциональнуюОпцию("НачислятьПлановыеПрочиеДоходы");
		
	Если Не НачислятьПлановыеПрочиеДоходы Тогда
		
		УстановитьПривилегированныйРежим(Истина);

		НаборЗаписей = РегистрыСведений.НастройкиПлановыхПрочихДоходов.СоздатьНаборЗаписей();
		НаборЗаписей.Прочитать();
		
		Запись = ?(НаборЗаписей.Количество() = 0, НаборЗаписей.Добавить(), НаборЗаписей[0]);
		Запись.НачислятьПлановыеПрочиеДоходы = Истина;

		НаборЗаписей.Записать();

	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли

