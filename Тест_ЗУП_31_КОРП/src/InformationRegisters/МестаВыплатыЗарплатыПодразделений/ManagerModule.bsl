#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

// Возвращает допустимые значения видов мест выплаты зарплаты подразделений.
//
// Возвращаемое значение:
//	Массив элементов типа ПеречислениеСсылка.ВидыМестВыплатыЗарплаты.
//
Функция ДопустимыеВидыМестВыплаты() Экспорт
	
	ДопустимыеВидыМестВыплаты = Новый Массив;
	ДопустимыеВидыМестВыплаты.Добавить(Перечисления.ВидыМестВыплатыЗарплаты.ЗарплатныйПроект);
	ДопустимыеВидыМестВыплаты.Добавить(Перечисления.ВидыМестВыплатыЗарплаты.Касса);
	ДопустимыеВидыМестВыплаты.Добавить(Перечисления.ВидыМестВыплатыЗарплаты.Раздатчик);

	Возврат ДопустимыеВидыМестВыплаты
	
КонецФункции	

#Область ПервоначальноеЗаполнениеИОбновлениеИнформационнойБазы

// Заполняет измерение Организация
//
Процедура ЗаполнитьОрганизацию() Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	МестаВыплаты.Подразделение КАК Подразделение,
	|	МестаВыплаты.Подразделение.Владелец КАК Организация
	|ИЗ
	|	РегистрСведений.МестаВыплатыЗарплатыПодразделений КАК МестаВыплаты
	|ГДЕ
	|	МестаВыплаты.Организация = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
	|
	|УПОРЯДОЧИТЬ ПО
	|	МестаВыплаты.Подразделение.Владелец,
	|	МестаВыплаты.Подразделение";
	
	ВыборкаПодразделений = Запрос.Выполнить().Выбрать();
	
	Пока ВыборкаПодразделений.Следующий() Цикл
		
		МестоВыплатыЗарплатыПодразделения = СоздатьМенеджерЗаписи();
		МестоВыплатыЗарплатыПодразделения.Подразделение = ВыборкаПодразделений.Подразделение;
	
		МестоВыплатыЗарплатыПодразделения.Прочитать();
	
		Если НЕ МестоВыплатыЗарплатыПодразделения.Выбран() Тогда
			МестоВыплатыЗарплатыПодразделения.Подразделение = ВыборкаПодразделений.Подразделение;
		КонецЕсли;	
		
		МестоВыплатыЗарплатыПодразделения.Организация = ВыборкаПодразделений.Организация;
		
		МестоВыплатыЗарплатыПодразделения.Записать();
		
	КонецЦикла
	
КонецПроцедуры	

#КонецОбласти

#КонецОбласти

#КонецЕсли